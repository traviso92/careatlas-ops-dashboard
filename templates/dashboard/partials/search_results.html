{% if has_results %}
<div class="bg-base-100 shadow-xl rounded-box p-2 w-full max-h-96 overflow-y-auto border border-base-300">
    {% if patients %}
    <div class="px-2 py-1 text-xs font-semibold text-base-content/60 uppercase tracking-wide">
        Patients
    </div>
    {% for patient in patients %}
    <a href="{% url 'patient_detail' patient.id %}"
       class="flex items-center gap-3 p-2 rounded hover:bg-base-200 cursor-pointer">
        <div class="avatar placeholder">
            <div class="bg-primary text-primary-content rounded-full w-8">
                <span class="text-xs">{{ patient.first_name.0 }}{{ patient.last_name.0 }}</span>
            </div>
        </div>
        <div class="flex-1 min-w-0">
            <div class="font-medium truncate">{{ patient.first_name }} {{ patient.last_name }}</div>
            <div class="text-xs text-base-content/60">MRN: {{ patient.mrn }}</div>
        </div>
        <span class="badge badge-sm badge-ghost">Patient</span>
    </a>
    {% endfor %}
    {% endif %}

    {% if orders %}
    {% if patients %}<div class="divider my-1"></div>{% endif %}
    <div class="px-2 py-1 text-xs font-semibold text-base-content/60 uppercase tracking-wide">
        Orders
    </div>
    {% for order in orders %}
    <a href="{% url 'order_detail' order.id %}"
       class="flex items-center gap-3 p-2 rounded hover:bg-base-200 cursor-pointer">
        <div class="avatar placeholder">
            <div class="bg-secondary text-secondary-content rounded-full w-8">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                </svg>
            </div>
        </div>
        <div class="flex-1 min-w-0">
            <div class="font-medium truncate">{{ order.order_number }}</div>
            <div class="text-xs text-base-content/60">
                {% if order.patient %}{{ order.patient.first_name }} {{ order.patient.last_name }}{% else %}Unknown patient{% endif %}
            </div>
        </div>
        <span class="badge badge-sm {% if order.status == 'delivered' %}badge-success{% elif order.status == 'shipped' %}badge-info{% elif order.status == 'cancelled' %}badge-error{% else %}badge-warning{% endif %}">
            {{ order.status|title }}
        </span>
    </a>
    {% endfor %}
    {% endif %}

    <div class="divider my-1"></div>
    <a href="{% url 'patient_list' %}?q={{ query }}"
       class="flex items-center justify-center gap-2 p-2 text-sm text-primary hover:bg-base-200 rounded">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
        </svg>
        View all results for "{{ query }}"
    </a>
</div>
{% elif query %}
<div class="bg-base-100 shadow-xl rounded-box p-4 text-center text-base-content/60 border border-base-300">
    <p>No results found for "{{ query }}"</p>
</div>
{% endif %}
