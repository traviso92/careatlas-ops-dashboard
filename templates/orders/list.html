{% extends "base.html" %}

{% block title %}Orders - CareAtlas Ops{% endblock %}

{% block breadcrumbs %}
<li>Orders</li>
{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Page Header -->
    <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold">Orders</h1>
        <a href="{% url 'order_create' %}" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            New Order
        </a>
    </div>

    <!-- Status Filter Tabs -->
    <div class="tabs tabs-boxed bg-base-100 p-1">
        <a href="{% url 'order_list' %}"
           class="tab {% if not current_status %}tab-active{% endif %}"
           hx-get="{% url 'order_list' %}"
           hx-target="#order-list"
           hx-push-url="true">
            All
        </a>
        {% for status_code, status_label in status_choices %}
        <a href="{% url 'order_list' %}?status={{ status_code }}"
           class="tab {% if current_status == status_code %}tab-active{% endif %}"
           hx-get="{% url 'order_list' %}?status={{ status_code }}"
           hx-target="#order-list"
           hx-push-url="true">
            {{ status_label }}
        </a>
        {% endfor %}
    </div>

    <!-- Search -->
    <div class="card bg-base-100 shadow">
        <div class="card-body py-4">
            <div class="form-control">
                <input type="text"
                       name="q"
                       value="{{ query }}"
                       placeholder="Search by order number or tracking..."
                       class="input input-bordered w-full max-w-md"
                       hx-get="{% url 'order_list' %}{% if current_status %}?status={{ current_status }}{% endif %}"
                       hx-trigger="keyup changed delay:300ms"
                       hx-target="#order-list"
                       hx-push-url="true" />
            </div>
        </div>
    </div>

    <!-- Order List -->
    <div id="order-list">
        {% include "orders/partials/order_table.html" %}
    </div>
</div>
{% endblock %}
